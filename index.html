<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/styles/style.min.css">
</head>

<body>
    <!-- <shadow-card></shadow-card> -->

    <header>
        <section class="sidebar001">
            <div class="side-nav">
                <div class="nav-header">
                    <div class="view">
                        <img src="./assets/images/190327132601350320.png" alt="">
                    </div>

                    <div class="nav-search">
                        <div class="input-group mb-3">
                            <input type="search" class="form-control" placeholder="請輸入關鍵字" aria-label="請輸入關鍵字"
                                aria-describedby="button-addon2">
                            <button class="btn btn-search" type="button" id="button-addon2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                    class="bi bi-search" viewBox="0 0 16 16">
                                    <path
                                        d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="nav-list">
                        <ul class="custom-collapse">
                            <li class="custom-nav-item">
                                <a href="#intro" class="btn-collapse">
                                    <span>關於三鳳宮</span>
                                </a>

                                <ul class="custom-collapse-1">
                                    <li class="custom-nav-item-1">
                                        <a href="#intro001" class="btn-collapse-1">
                                            <span>神明介紹</span>
                                        </a>

                                        <ul class="custom-collapse-2">
                                            <li class="custom-nav-item-2">
                                                <a href="#intro002" class="btn-collapse-2">三太子-太子爺公</a>
                                            </li>
                                            <li class="custom-nav-item-2">
                                                <a href="#intro003" class="btn-collapse-2">南無釋迦牟尼佛祖</a>
                                            </li>
                                            <li class="custom-nav-item-2">
                                                <a href="#intro004" class="btn-collapse-2">玉皇大帝</a>
                                            </li>
                                        </ul>
                                    </li>

                                    <li class="custom-nav-item-1">
                                        <a href="#introCome" class="btn-collapse-1">
                                            <span>三太子由來</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="custom-nav-item">
                                <a href="#trip" class="btn-collapse">
                                    <span>活動行程</span>
                                </a>


                                <ul class="custom-collapse-1">
                                    <li class="custom-nav-item-1">
                                        <a href="#news" class="btn-collapse-1">
                                            <span>最新消息</span>
                                        </a>

                                        <ul class="custom-collapse-2">
                                            <li class="custom-nav-item-2">
                                                <a href="#intro002" class="btn-collapse-2">三太子-太子爺公</a>
                                            </li>
                                            <li class="custom-nav-item-2">
                                                <a href="#intro003" class="btn-collapse-2">南無釋迦牟尼佛祖</a>
                                            </li>
                                            <li class="custom-nav-item-2">
                                                <a href="#intro004" class="btn-collapse-2">玉皇大帝</a>
                                            </li>
                                        </ul>
                                    </li>

                                    <li class="custom-nav-item-1">
                                        <a href="#activity" class="btn-collapse-1">
                                            <span>活動行程</span>
                                        </a>
                                    </li>
                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>活動花絮</span>
                                        </a>
                                    </li>
                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>影片專區</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <li class="custom-nav-item">
                                <a href="#" class="btn-collapse">
                                    <span>拜拜事項</span>
                                </a>

                                <ul class="custom-collapse-1">
                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>拜拜方式</span>
                                        </a>
                                    </li>

                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>擲筊需知</span>
                                        </a>
                                    </li>
                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>抽籤需知</span>
                                        </a>
                                    </li>
                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>拜拜必備認知</span>
                                        </a>
                                    </li>
                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>點燈介紹</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <li class="custom-nav-item">
                                <a href="#" class="btn-collapse">
                                    <span>解籤園地</span>
                                </a>

                                <ul class="custom-collapse-1">
                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>拜拜方式</span>
                                        </a>
                                    </li>

                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>擲筊需知</span>
                                        </a>
                                    </li>
                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>抽籤需知</span>
                                        </a>
                                    </li>
                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>拜拜必備認知</span>
                                        </a>
                                    </li>
                                    <li class="custom-nav-item-1">
                                        <a href="#" class="btn-collapse-1">
                                            <span>點燈介紹</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>

                    </div>
                </div>

            </div>
            <div class="side-nav-btn">
                <button class="btn btn-custom">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-list" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                    </svg>
                    <span>選單</span>
                </button>
            </div>
        </section>

        <section class="navbar002">
            <div class="the-most-top-nav-bg"></div>
        </section>
    </header>

    <div class="container">
        <user-card name="Sunwoo Jun"
            avatar="https://images.unsplash.com/photo-1599566150163-29194dcaad36?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80">
            <div slot="email">whitersun@gmail.com</div>
            <div slot="phone">555-555-5555</div>
        </user-card>
        <user-card name="Sunwoo Tyanna"
            avatar="https://images.unsplash.com/photo-1514161955277-4ea47eef2ff9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80">
            <div slot="email">tyanna@gmail.com</div>
            <div slot="phone">777-777-7777</div>
        </user-card>
        <user-card name="Sunwoo Tyanna"
            avatar="https://images.unsplash.com/photo-1514161955277-4ea47eef2ff9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80">
            <div slot="email">tyanna@gmail.com</div>
            <div slot="phone">777-777-7777</div>
        </user-card>
        <user-card name="Sunwoo Tyanna"
            avatar="https://images.unsplash.com/photo-1514161955277-4ea47eef2ff9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80">
            <div slot="email">tyanna@gmail.com</div>
            <div slot="phone">777-777-7777</div>
        </user-card>
        <user-card name="Sunwoo Tyanna"
            avatar="https://images.unsplash.com/photo-1514161955277-4ea47eef2ff9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80">
            <div slot="email">tyanna@gmail.com</div>
            <div slot="phone">777-777-7777</div>
        </user-card>
        <user-card name="Sunwoo Tyanna"
            avatar="https://images.unsplash.com/photo-1514161955277-4ea47eef2ff9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80">
            <div slot="email">tyanna@gmail.com</div>
            <div slot="phone">777-777-7777</div>
        </user-card>
        <user-card name="Sunwoo Tyanna"
            avatar="https://images.unsplash.com/photo-1514161955277-4ea47eef2ff9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80">
            <div slot="email">tyanna@gmail.com</div>
            <div slot="phone">777-777-7777</div>
        </user-card>
    </div>

    <script src="app.js"></script>

    <script>
        function nestedListChildEl(item, iconDown) {
            if (!item) return

            var arrayNestedList = [...item.children];

            // console.log(arrayNestedList);
            arrayNestedList.map(el => {
                var isHaveChild = [...el.children].find(elChild => elChild.classList.contains(
                    'custom-collapse-2'))

                if (isHaveChild) {
                    var collapseBtn2 = item.children[0].children[0];
                    var createIconSpan = document.createElement('span');
                    createIconSpan.classList.add('custom-pr');

                    createIconSpan.innerHTML = `${iconDown}`

                    var collapseBtn = item.children[0];
                    collapseBtn.appendChild(createIconSpan);
                    collapseBtn2.appendChild(createIconSpan);
                }
            })
        }

        function sidebar001({
            iconDown: iconDown,
            accordion: accordion,
            duration: duration
        }) {
            var sidebarArray = Array.from(document.querySelectorAll('.custom-nav-item'));

            /**
             * @description "if accordion not boolean by user, this will default false"
             */
            var accordion = accordion ? accordion : false;

            sidebarArray.map(item => {
                var createIconSpan = document.createElement('span');
                createIconSpan.classList.add('custom-pr');

                createIconSpan.innerHTML = `${iconDown}`

                var collapseBtn = item.children[0];
                collapseBtn.appendChild(createIconSpan);

                nestedListChildEl(item.children[1], iconDown)

                item.addEventListener('click', function (event) {
                    var getNestedList = Array.from(event.target.parentElement.children);

                    var _b = new Set(event.target.parentElement.children);
                    var _c = Array.from(_b)

                    var isNested = getNestedList.find(nestedEl => nestedEl.classList.contains(
                            'custom-collapse-1') || nestedEl.classList.contains(
                        'custom-collapse-2'))

                    var rotationIcon = getNestedList[0].children[1];


                    // above just using for accordion
                    var nestedListEl = event.target.classList.contains('btn-collapse-1');
                    var nestedListIsActive = Boolean;
                    if (isNested) nestedListIsActive = isNested.classList.contains('active')
                    else return

                    condition1: if (accordion) {
                        console.log(1)
                        var checkActiveList = Array.from(item.parentElement.children).find(
                        itemEl => {
                            var findActiveEl = itemEl.children;

                            condition3: if (!findActiveEl[1]) return
                            return findActiveEl[1].classList.contains('active');
                        })

                        if (nestedListIsActive) {
                            console.log(2)

                            console.log(nestedListIsActive);
                            isNested.classList.remove('active');
                            getNestedList[0].classList.remove('bg-half-white')
                            rotationIcon.classList.toggle('rotation-icon');
                            return
                        }

                        condition4: if (checkActiveList !== undefined && !nestedListEl) {
                            console.log(3)

                            console.log(checkActiveList.children[0])
                            checkActiveList.children[0].classList.remove('bg-half-white')
                            checkActiveList.children[0].children[1].classList.remove(
                                'rotation-icon')
                            checkActiveList.children[1].classList.remove('active')
                        };
                    }

                    function removeActive() {
                        getNestedList[0].classList.remove('bg-half-white')

                        rotationIcon.classList.remove('rotation-icon')
                        isNested.classList.remove('active');
                    }

                    condition2: if (!!nestedListEl) {
                        console.log(4)

                        if (isNested) {
                            console.log(5)

                            getNestedList[0].classList.toggle('bg-half-white')
                            rotationIcon.classList.toggle('rotation-icon');
                            isNested.classList.toggle('active');
                            isNested.style.transition = `max-height ${duration}ms ease`;
                        }
                    } else {
                        console.log(6)

                        getNestedList[0].classList.toggle('bg-half-white')
                        rotationIcon.classList.toggle('rotation-icon');
                        isNested.classList.toggle('active');
                        isNested.style.transition = `max-height ${duration}ms ease`;

                    }
                })
            })


            var sideNavActiveButton = document.querySelector('.btn-custom');

            sideNavActiveButton.addEventListener('click', function (e) {
                var activeSidebar = document.querySelector('.side-nav');

                if (!activeSidebar.classList.contains('active')) {
                    activeSidebar.classList.toggle('active');
                    document.body.style.overflow = 'hidden';
                    var createHiddenElement = document.createElement('shadow-card');

                    document.body.appendChild(createHiddenElement);
                } else {
                    document.body.style.overflow = 'auto';
                    var bodyListElement = document.body.children
                    var convertArray = Array.from(bodyListElement);

                    // console.log(convertArray)

                    var isHaveShadowDom = convertArray.find(item => item.localName === 'shadow-card')
                
                    console.log(isHaveShadowDom)
                    if (isHaveShadowDom) {
                        activeSidebar.classList.remove('active')
                        isHaveShadowDom.remove()
                    }
                    else return
                }
            })
        }

        sidebar001({
            accordion: false,
            duration: 350,
            iconDown: `
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
                    <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                </svg>
            `,
        })
    </script>
</body>

</html>